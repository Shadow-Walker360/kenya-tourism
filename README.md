#!/usr/bin/env bash
# README.sh - Fancy interactive README for Shadow-Walker360/kenya-tourism
# Save as README.sh, then: chmod +x README.sh && ./README.sh
# Optional: ./README.sh --generate-md to create README.md in the current directory

set -euo pipefail
IFS=$'\n\t'

# Repo info
REPO_URL="https://github.com/Shadow-Walker360/kenya-tourism"
PROJECT_NAME="kenya-tourism"
OWNER="Shadow-Walker360"

# Colors (fallback to safe ANSI if tput missing)
if command -v tput >/dev/null 2>&1; then
  bold="$(tput bold)"
  reset="$(tput sgr0)"
  red="$(tput setaf 1)"
  green="$(tput setaf 2)"
  yellow="$(tput setaf 3)"
  blue="$(tput setaf 4)"
  magenta="$(tput setaf 5)"
  cyan="$(tput setaf 6)"
else
  bold="\e[1m"
  reset="\e[0m"
  red="\e[31m"
  green="\e[32m"
  yellow="\e[33m"
  blue="\e[34m"
  magenta="\e[35m"
  cyan="\e[36m"
fi

# Small helper to print a horizontal rule sized to terminal
hr() {
  local width=${1:-$(tput cols 2>/dev/null || echo 80)}
  printf '%*s\n' "$width" '' | tr ' ' '-'
}

# ASCII art header (safe fallback)
print_header() {
  cat <<EOF
${bold}${cyan}
   _  __                  _        _______                 _             
  | |/ / ___  _ __  _   _| | __   |__   __|               | |            
  | ' / / _ \| '_ \| | | | |/ /     _| | ___  ___ _ __ ___| | ___  _ __  
  | . \| (_) | | | | |_| |   <     | | |/ _ \/ __| '__/ _ \ |/ _ \| '_ \ 
  |_|\_\\___/|_| |_|\__,_|_|\_\    |_|_|  __/\__ \ | |  __/ | (_) | | | |
                                 ______|___/|___/_|  \___|_|\___/|_| |_|
${reset}
${bold}${yellow}A friendly interactive README for:${reset} ${magenta}${OWNER}/${PROJECT_NAME}${reset}
${bold}${blue}Repository:${reset} ${REPO_URL}
EOF
  hr
}

about() {
  cat <<EOF

${bold}About${reset}
This project showcases tourism features and examples focused on Kenya â€” destinations, guides, maps,
and sample content to help developers and travelers explore and contribute.

${bold}Why a fancy README script?${reset}
- Terminal-first: great for developers working in terminals and remote systems
- Interactive: quickly explore sections without scrolling
- Reproducible: export a ready-to-use README.md file

EOF
}

features() {
  cat <<EOF

${bold}Features${reset}
- Beautiful terminal presentation with colors and ASCII art
- Interactive menu for quick navigation
- Quickstart clone, install, and run snippets
- One-command README.md generation
- Contribution and license guidance

EOF
}

quickstart() {
  cat <<EOF

${bold}Quickstart${reset}
Clone the repo:
  ${green}git clone ${REPO_URL}${reset}

Enter the repo:
  ${green}cd ${PROJECT_NAME}${reset}

Common steps (pick the one that fits your stack):

- If this is a web project (Node.js):
  ${green}npm install${reset}
  ${green}npm start${reset}

- If it uses Python:
  ${green}python3 -m venv .venv
  ${green}source .venv/bin/activate
  ${green}pip install -r requirements.txt${reset}

- If built as static site:
  ${green}open index.html${reset} (or serve with a simple HTTP server)

Note: These commands are generic. Check project-specific files (package.json, requirements.txt, etc.) for exact instructions.
EOF
}

usage_examples() {
  cat <<EOF

${bold}Usage Examples${reset}
- Run the interactive demo (if provided):
  ${green}bash demo.sh${reset}

- Build or test:
  ${green}make build${reset} or ${green}npm run build${reset}

- Export the README from this script:
  ${green}./README.sh --generate-md${reset}

EOF
}

contributing() {
  cat <<EOF

${bold}Contributing${reset}
We welcome contributions! Typical workflow:
1) Fork the repo
2) Create a feature branch: ${green}git checkout -b feature/my-change${reset}
3) Commit and push: ${green}git commit -am "Add feature" && git push origin feature/my-change${reset}
4) Open a Pull Request against ${OWNER}/${PROJECT_NAME}

Please include:
- A clear description of your change
- Screenshots or demos if visual
- Tests where appropriate

EOF
}

license() {
  cat <<EOF

${bold}License${reset}
This repository does not include a license file by default in this script.
Add a LICENSE (e.g., MIT) to clarify permissions. Example:
  ${green}curl -o LICENSE https://opensource.org/licenses/MIT${reset}

EOF
}

generate_md() {
  local out="${1:-README.md}"
  {
    echo "# ${PROJECT_NAME}"
    echo
    echo "_Interactive README generated by README.sh_"
    echo
    echo "Repository: ${REPO_URL}"
    echo
    echo "## About"
    echo "This project showcases tourism features and examples focused on Kenya â€” destinations, guides, maps, and sample content to help developers and travelers explore and contribute."
    echo
    echo "## Quickstart"
    echo '```bash'
    echo "git clone ${REPO_URL}"
    echo "cd ${PROJECT_NAME}"
    echo '```'
    echo
    echo "## Usage Examples"
    echo "- Run demos, build or test depending on project stack."
    echo
    echo "## Contributing"
    echo "Fork, branch, commit, push, and open a PR. Include clear description and tests if applicable."
    echo
    echo "## License"
    echo "Add a LICENSE file (e.g., MIT) to clarify permissions."
  } > "${out}"
  printf "${green}Generated ${out}${reset}\n"
}

menu() {
  cat <<EOF

${bold}Menu${reset}
1) About
2) Features
3) Quickstart
4) Usage Examples
5) Contributing
6) License
7) Export README.md
8) Open repository in default browser
9) Exit

EOF
}

open_repo() {
  if command -v xdg-open >/dev/null 2>&1; then
    xdg-open "${REPO_URL}" >/dev/null 2>&1 || true
  elif command -v open >/dev/null 2>&1; then
    open "${REPO_URL}" >/dev/null 2>&1 || true
  else
    printf "%s\n" "${yellow}No browser open command found. Visit: ${REPO_URL}${reset}"
  fi
}

interactive() {
  print_header
  while true; do
    menu
    read -rp "Select an option (1-9): " choice || exit 0
    hr
    case "${choice}" in
      1) about ;;
      2) features ;;
      3) quickstart ;;
      4) usage_examples ;;
      5) contributing ;;
      6) license ;;
      7)
         read -rp "Output filename (default README.md): " fname
         fname=${fname:-README.md}
         generate_md "${fname}"
         ;;
      8) open_repo ;;
      9) echo "Bye ðŸ‘‹"; exit 0 ;;
      *)
         echo "${red}Invalid choice.${reset}" ;;
    esac
    hr
    read -rp "Press Enter to return to menu..." _ || true
    hr
  done
}

print_help() {
  cat <<EOF
README.sh - Fancy interactive README for ${OWNER}/${PROJECT_NAME}

Usage:
  ./README.sh            # Launch interactive terminal README
  ./README.sh --generate-md [FILENAME]  # Create README.md (default name README.md)
  ./README.sh --help     # Show this help

Examples:
  ./README.sh --generate-md
  ./README.sh --generate-md PROJECT_README.md

EOF
}

# CLI argument parsing (very simple)
if [[ "${1:-}" == "--help" || "${1:-}" == "-h" ]]; then
  print_help
  exit 0
fi

if [[ "${1:-}" == "--generate-md" ]]; then
  out="${2:-README.md}"
  generate_md "${out}"
  exit 0
fi

# Default: interactive mode
interactive

# End of script
